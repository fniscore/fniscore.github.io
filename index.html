<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Progressive NASH Index (PNI) Calculator</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Latest compiled and minified CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
        </script>
        <script type="text/javascript"
                src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>


        <!-- Latest compiled JavaScript -->
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
            <div class="container px-4 navbar-dark bg-dark" background-color="#16537e">
                <a class="navbar-brand" href="https://www.gu.se">University of Gothenburg</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="#calculator">Calculator</a></li>
                        <li class="nav-item"><a class="nav-link" href="#overview">Overview</a></li>
                        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Header-->
        <header class="bg-primary bg-gradient text-white" id="calculator">
            <div class="container px-4 text-md-center" >
                <h1 class="fw-bolder">Progressive NASH Index (PNI) Calculator</h1>
                <div class="container justify-content-around m-5 bd-highlight mb-3">
                    <div class="row">
                        <div class="col-sm-3 container">
                            <div class="flex-row justify-content-center m-2 bd-highlight">
                                <div class="d-inline-flex form-floating m-1 text-dark">
                                    <input type="number" class="form-control" id="floatingInputAST" placeholder="U/L" value="">
                                    <label class="align-middle" for="floatingInputAST">AST</label>
                                </div>
                                <div class="d-inline-flex justify-content-center m-1 bd-highlight bg-success">
                                    <label class="m-2 align-middle" for="floatingInputAST">U/L</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 container justify-content-center m-2 bd-highlight">
                            <div class="flex-row">
                                <div class="d-inline-flex form-floating m-1 text-dark">
                                    <input type="number" class="form-control" id="floatingInputHbA1c" placeholder="U/L" value="">
                                    <label class="align-middle" for="floatingInputHbA1c">HbA1c</label>
                                </div>
                                <div class="d-inline-flex justify-content-center m-1 bd-highlight">
                                    <input type="radio" class="btn btn-check" name="options-HbA1c" id="HbA1c_percentage" autocomplete="off"  checked>
                                    <label class="btn btn-outline-primary" for="HbA1c_percentage" title="HbA1c (%) = (HbA1c mmol/mol /10.929) + 2.15" data-toggle="tooltip">%</label>

                                    <input type="radio" class="btn btn-check" name="options-HbA1c" id="HbA1c_percentage_mmoll" autocomplete="off" >
                                    <label class="btn btn-outline-warning mx-1" for="HbA1c_percentage_mmoll" title="HbA1c (%) = (HbA1c mmol/mol /10.929) + 2.15" data-toggle="tooltip">mmol/mol*</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 container justify-content-center m-2 bd-highlight">
                            <div class="flex-row">
                                <div class="d-inline-flex form-floating m-1 text-dark">
                                    <input type="number" class="form-control" id="floatingInputHDL" placeholder="U/L" value="">
                                    <label class="align-middle" for="floatingInputHDL">HDL</label>
                                </div>
                                <div class="d-inline-flex justify-content-center m-1 flex-row bd-highlight">
                                    <input type="radio" class="btn-check" name="options-HDL" id="HDL_mgdl" autocomplete="off" checked>
                                    <label class="btn btn-outline-primary" for="HDL_mgdl" data-toggle="tooltip" data-placement="top" title="HDL (mg/dL) = HDL (mmol/L)*38.67">mg/dL</label>

                                    <input type="radio" class="btn-check" name="options-HDL" id="HDL_mmoll" autocomplete="off">
                                    <label class="btn btn-outline-warning mx-1" for="HDL_mmoll" data-toggle="tooltip" data-placement="top" title="HDL (mg/dL) = HDL (mmol/L)*38.67">mmol/L</label>
                                </div>
                            </div>

    <!--                        <label class="m-2 align-middle" id="floatingInputHDLLabel" for="floatingInputHDL">mg/dL</label>-->

    <!--                        <label class="m-2 align-middle" id="floatingInputHDLLabelLabel" for="floatingInputHDLLabel">mmol/L**</label>-->
                        </div>
                    </div>
                    <hr/>
                </div>

                <div class="flex-row justify-content-center">
                    <div class="d-inline-flex form-floating p-1 text-dark">
                        <input type="text" class="form-control" id="pni_value"  style="text-align:center;" placeholder="NaN" value="NaN" disabled>
                        <label class="align-middle" for="floatingInputHDL">PNI</label>
                    </div>
                    <div class="d-inline-flex align-middle ps-2 pb-3 mb-2 text-warning"><b>% probability of progressive NASH</b></div>
                </div>

                <p class="m-3"><b>Disclaimer notice:</b> It is important for bear in mind that this is not a medical device and creators are not responsible for the use of the algorithm in a clinical setting.</p>

                <a class="btn btn-lg btn-light mt-5 mb-0" href="#wstt">Who should take the test?</a>
            </div>
        </header>
        <!-- Overview section-->
        <section class="bg-light" id="overview">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="fw-bolder mb-5">Overview</h2>
                        <h3 class="fw-bolder" id="wstt">Who should take the test?</h3>
                        <p class="lead">Individuals with 1 or more of the following conditions:</p>
                        <ul class="inside">
                            <li>Overweight (BMI ≥25 kg/m&#178;)</li>
                            <li>Obesity (BMI ≥30 kg/m&#178;)</li>
                            <li>Type 2 diabetes</li>
                            <li>Metabolic syndrome:</li>
                        </ul>
                        <table class="table">
                            <thead>
                            <tr class="table-primary">
                                <td colspan="2"><b>International Diabetes Federation (IDF) definition (2005)</b></td>
                            </tr>
                            </thead>

                            <tbody>
                            <tr >
                                <td>Central obesity</td>
                                <td colspan="2">Waist circumference ≥ 94/80 cm in men/women (European ancestry)
                                    or BMI > 30 kg/m&#178;
                                </td>
                            </tr>
                            <tr class="table-secondary" >
                                <td colspan="3">Plus any two of the following:
                                </td>
                            </tr>
                            <tr >
                                <td>Triglycerides </td>
                                <td colspan="2">≥ 1.7 mmol/L (150 mg/dL) or specific treatment for this lipid abnormality
                                </td>
                            </tr>
                            <tr>
                                <td>HDL cholesterol </td>
                                <td>
                                    <!-- nested row -->
                                    <table>
                                        <tr>
                                            <td>< 1.03 mmol/L (40 mg/dL) in men</td>
                                        </tr>
                                        <tr>
                                            <td>< 1.29 mmol/L (50 mg/dL) in women</td>
                                        </tr>
                                        <tr>
                                            <td>or specific treatment for this lipid abnormality</td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr >
                                <td>Blood pressure</td>
                                <td colspan="2">Systolic ≥ 130 mmHg or diastolic ≥ 85 mmHg or treatment of previously diagnosed hypertension
                                </td>
                            </tr>
                            <tr >
                                <td>Fasting plasma glucose</td>
                                <td colspan="2">≥ 5.6 mmol/L (100 mg/dL) or previously diagnosed type 2 diabetes
                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <h3 class="fw-bolder mb-3" id="outcome">Outcome</h3>
                        <p class>Progressive NASH: histological diagnosis of NASH + elevated NAS score (NAS≥4) + significant fibrosis (F≥2)</p>

                        <h3 class="fw-bolder mb-3" id="formula">Formula</h3>
                        $$PNI = \dfrac{e^{\left(-10.33+2.54 \times \ln \left(AST \left[ U/L\right] \right) + 3.86 \times \ln \left(HbA1c \left[ \%\right] \right) - 1.66 \times \ln \left(HDL \left[ mg/dL \right] \right) \right)}}{ 1+e^{\left(-10.33+2.54 \times \ln \left(AST \left[ U/L\right] \right) + 3.86 \times \ln \left(HbA1c \left[ \%\right] \right) - 1.66 \times \ln \left(HDL \left[ mg/dL \right] \right) \right)}}$$
                        <p>
                            The score was developed in the derivation cohort (264 morbidly obese individuals) using a bootstrapping stepwise logistic regression model (2000 bootstrap samples). The score was derived based on the final predictors and the corresponding regression coefficients. Performance for progressive NASH was assessed by the receiver operating characteristic curve (AUROC). Rule-out and rule-in cut-offs were derived based on sensitivity ≥0.89 and specificity ≥0.90, respectively.
                        </p>

                        <h3 class="fw-bolder mb-3" id="interpretation">Interpretation</h3>
                        <p>The PNI is a predicted probability score derived from a logistic regression model, and it ranges from 0 to 1.</p>


                        <h3 class="fw-bolder mb-3" id="performance">Performance and cut-offs</h3>

                        <div class="container">
                            <table class="table">
                                <tr>
                                    <td>N</td>
                                    <td>264</td>
                                </tr>
                                <tr>
                                    <td>Progressive NASH, n (%)</td>
                                    <td>54 (20.5)</td>
                                </tr>
                                <tr style="border-bottom: 1px dashed black;">
                                    <td>AUROC (95% CI)</td>
                                    <td>0.78 (0.71-0.85)</td>
                                </tr>

                                <tr>
                                    <td colspan="2"><b>PNI ≤ 0.10 (Rule-out zone)</b></td>
                                </tr>
                                <tr>
                                    <td>n (%)</td>
                                    <td>83 (31.4)</td>
                                </tr>
                                <tr>
                                    <td>Sensitivity</td>
                                    <td>0.89</td>
                                </tr>
                                <tr>
                                    <td>Specificity</td>
                                    <td>0.37</td>
                                </tr>
                                <tr>
                                    <td>PPV</td>
                                    <td>0.27</td>
                                </tr>
                                <tr style="border-bottom: 1px dashed black;">
                                    <td>NPV</td>
                                    <td>0.93</td>
                                </tr>

                                <tr>
                                    <td colspan="2"><b>PNI ≥ 0.33 (Rule-in zone)</b></td>
                                </tr>

                                <tr>
                                    <td>n (%)</td>
                                    <td>49 (18.6)</td>
                                </tr>
                                <tr>
                                    <td>Sensitivity</td>
                                    <td>0.52</td>
                                </tr>
                                <tr>
                                    <td>Specificity</td>
                                    <td>0.90</td>
                                </tr>
                                <tr>
                                    <td>PPV</td>
                                    <td>0.57</td>
                                </tr>
                                <tr style="border-bottom: 1px dashed black;">
                                    <td>NPV</td>
                                    <td>0.88</td>
                                </tr>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Contact section-->
        <section id="contact">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>Contact us</h2>
                        <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- About section-->
        <section id="about">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>About this page</h2>
                        <p class="lead">This is a great place to talk about your webpage. This template is purposefully unstyled so you can use it as a boilerplate or starting point for you own landing page designs! This template features:</p>
                        <ul>
                            <li>Clickable nav links that smooth scroll to page sections</li>
                            <li>Responsive behavior when clicking nav links perfect for a one page website</li>
                            <li>Bootstrap's scrollspy feature which highlights which section of the page you're on in the navbar</li>
                            <li>Minimal custom CSS so you are free to explore your own unique design options</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="py-5 bg-dark">
            <div class="container px-4"><p class="m-0 text-center text-white">Copyright &copy; PNI calculator 2021</p></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>

    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

    <script>
        function myFunction() {
            var ast = parseFloat(document.getElementById("floatingInputAST").value);
            var hba1c_val = parseFloat(document.getElementById("floatingInputHbA1c").value);
            var hdl_val = parseFloat(document.getElementById("floatingInputHDL").value);
            if (ast && hba1c_val && hdl_val){
                var hba1c_percentage = document.getElementById('HbA1c_percentage').checked;
                var hdl_mdgl = document.getElementById('HDL_mgdl').checked;
                var hba1c = hba1c_percentage ? (hba1c_val / 10.929) + 2.15 : hba1c_val;
                var hdl = hdl_mdgl ? hdl_val * 38.67 : hdl_val;
                let temp = Math.exp(-10.33+2.54*Math.log(ast)+3.86*Math.log(hba1c)-1.66*Math.log(hdl))/(1+Math.exp(3));
                let pni = String((temp/(1+temp)).toFixed(6));
                document.getElementById("pni_value").value = pni;
            } else {
                document.getElementById("pni_value").value = "NaN";
            }

        }
        document.getElementById("floatingInputAST").addEventListener("input", myFunction);
        document.getElementById("floatingInputHbA1c").addEventListener("input", myFunction);
        document.getElementById("floatingInputHDL").addEventListener("input", myFunction);
        document.getElementById("HbA1c_percentage").addEventListener("click", myFunction);
        document.getElementById("HbA1c_percentage_mmoll").addEventListener("click", myFunction);
        document.getElementById("HDL_mgdl").addEventListener("click", myFunction);
        document.getElementById("HDL_mmoll").addEventListener("click", myFunction);
    </script>




</html>
